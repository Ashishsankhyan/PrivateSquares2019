@model PrivateSquareWeb.Models.HeaderPartialModel

<script type="text/javascript">
    var DeleteItem = function (index) {

        var divCart = document.getElementById('CartList');
        var divCartTotal = document.getElementById('CartTotal');
        var CartString = "";
        var CartTotal = "";
        

        $.ajax({
            url: "../../WebsiteHeader/RemoveToCart",
            type: "POST",
            //contentType: false,
            //processData: false,
            data: {
                index: index
            },
            success: function (result) {
                var JsonResponse = JSON.parse(result);
                console.log(JsonResponse);
                console.log(JsonResponse.length);
                var ProductName = "";
                var Qty = "";
                var ImageName = "";
                var TotalAmount = 0;
                for (var i = 0; i < JsonResponse.length; i++) {

                    // console.log(JsonResponse.ProductId);
                    ProductName = JsonResponse[i].ProductName;
                    Qty = JsonResponse[i].Qty;
                    TotalAmount = Number(TotalAmount) + Number(JsonResponse[i].Amount);
                    ImageName = JsonResponse[i].ImageName;
                    console.log('~/DocImg/' + ImageName);
                    CartString = CartString + '<div class="ps-cart-item"><a class="ps-cart-item__close" onclick="DeleteItem(' + i + ')"></a>' +
                        '<div class="ps-cart-item__thumbnail">' +
                        '<a href="/WebHome/ProductDetail/' + JsonResponse[i].ProductId + '"></a>' +
                        '<img src="../../DocImg/' + ImageName + '" alt="">' +
                        '</div>' +
                        '<div class="ps-cart-item__content">' +
                        '<a class="ps-cart-item__title" href="/WebHome/ProductDetail/' + JsonResponse[i].ProductId + '">' + JsonResponse[i].ProductName + '</a>' +
                        '<p><span>Quantity:<i>' + JsonResponse[i].Qty + '</i></span><span>Total:<i>₹ ' + JsonResponse[i].Amount + '</i></span></p></div>' +
                        '</div>';
                }
                if (JsonResponse.length == null || JsonResponse.length == 0) {

                }
                if (JsonResponse.length > 0) {


                    CartTotal = CartTotal + "<p>Number of items:<span>" + JsonResponse.length + "</span></p>" +
                        "<p>Item Total:<span>₹" + TotalAmount + "</span></p>";

                }
                //console.log(CartString);
                //console.log(CartTotal);
                // $("#CartList").append(CartString);
                divCart.innerHTML = CartString;
                divCartTotal.innerHTML = CartTotal;
                $("#CartCount").load(location.href + ' #CartCount');
                //window.location.href = "/WebHome/ProductDetail/" + ProductId;
            },
            error: function (error) {
                console.log(error);
            }
        });
    }
</script>


<div class="header--sidebar"></div>

<header class="header" data-sticky="true">

    <div class="header__top">

        <div class="container-fluid">

            <div class="row">

                <div class="col-lg-6 col-md-8 col-sm-6 col-xs-12 ">

                    <p>460 West 34th Street, 15th floor, New York - Hotline: 804-377-3580 - 804-399-3580</p>

                </div>

                <div class="col-lg-6 col-md-4 col-sm-6 col-xs-12 ">

                    <div class="header__actions">

                        @{ if (@Model.UserId != 0)

                            {
                                <a href="/Checkout/Index">Checkout</a>
                                <div class="btn-group ps-dropdown">



                                    <a class="dropdown-toggle" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">@Model.UserName<i class="fa fa-angle-down"></i></a>



                                    <ul class="dropdown-menu">

                                        <li><a href="#">My Orders</a></li>
                                        <li><a href="~/WebHome/WishList">My Wishlist</a></li>

                                        <li><a href="/WebLogin/Logout">Log Out</a></li>



                                    </ul>



                                </div>





                            }

                            else if (@Model.UserId == 0)

                            {

                                <a href="/WebLogin/Index">Login & Regiser</a>

                            }

                        }











                    </div>



                </div>



            </div>



        </div>



    </div>



    <nav class="navigation">



        <div class="container-fluid">



            <div class="left">



                <div class="header__logo"><a class="ps-logo" href="/WebHome/Index"><img src="~/WebSiteTheme/images/logo.png" alt=""></a></div>



            </div>



            <div class="center">



                <ul class="main-menu menu">



                    <li class="current-menu-item">

                        <a href="/WebHome/Index">Home</a>

                    </li>

                    <li><a href="/ProductCatWise/Index/1">Electronics</a></li>

                    <li><a href="/ProductCatWise/Index/2">Kitchen</a></li>

                    <li><a href="/WebContactUs/Index">Contact</a></li>

                </ul>

            </div>

            <div class="right">

                <div class="menu-toggle"><span></span></div>

                <div class="ps-cart">
                    <div id="CartCount">
                        <a class="ps-cart__toggle" href="~/ViewCart/ViewCart"><span><i>@Model.CartItemCount</i></span><i class="ps-icon-cart"></i></a>
                    </div>
                    <div class="ps-cart__listing">

                        <div class="ps-cart__content">

                            <div id="CartList">

                                @{ int index = 0;

                                    foreach (var item in ViewBag.AddToCart)

                                    {

                                        <div class="ps-cart-item">

                                            <a class="ps-cart-item__close" onclick="DeleteItem(@index)"></a>

                                            <div class="ps-cart-item__thumbnail">

                                                <a href="/WebHome/ProductDetail/@item.ProductId"></a>

                                                <img src="~/DocImg/@item.ImageName" alt="">

                                            </div>

                                            <div class="ps-cart-item__content">

                                                <a class="ps-cart-item__title" href="/WebHome/ProductDetail/@item.ProductId"> @item.ProductName</a>

                                                <p><span>Quantity:<i> @item.Qty</i></span><span>Total:<i>₹ @item.Amount</i></span></p>

                                            </div>

                                        </div>

                                    }

                                }

                            </div>

                        </div>

                        <div class="ps-cart__total" id="CartTotal">

                            <p>Number of items:<span>@Model.CartItemCount</span></p>

                            <p>Item Total:<span>₹ @ViewBag.TotalAmount</span></p>

                        </div>

                        <div class="ps-cart__footer"><a class="ps-btn" href="/Checkout/Index">Check out<i class="ps-icon-arrow-left"></i></a></div>

                    </div>

                </div>
                @using (Html.BeginForm("SearchBar", "WebHome", FormMethod.Post, new { @class = "ps-form--search" }))
                {
                    @*<form class="ps-form--search" action="do_action" method="post">*@

                    @Html.TextBoxFor(m => m.SearchBarText, new { @class = "form-control", placeholder = "Search Product…", value= "TxtSearch",id= "TxtSearch" })
                    @*<input class="form-control" type="text" placeholder="Search Product…">*@
                    < input type="submit" class="ps-icon-search"/>
                    @*<button><i class="ps-icon-search"></i></button>*@

                    @*</form>*@
                }


            </div>



        </div>



    </nav>



</header>





